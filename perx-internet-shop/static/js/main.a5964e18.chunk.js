(this.webpackJsonpperx_internet_shop=this.webpackJsonpperx_internet_shop||[]).push([[0],{19:function(t,e,n){t.exports={button:"Button_button__1d2hJ",buttonWide:"Button_buttonWide__27x7C",buttonDanger:"Button_buttonDanger__3TVJ3"}},20:function(t,e,n){t.exports={productCard:"ProductCard_productCard__VwQI_",productImage:"ProductCard_productImage__Lcm4z",productInfo:"ProductCard_productInfo__33-xO"}},24:function(t,e,n){t.exports={cartButton:"CartButton_cartButton__-ICv4",cartSplitter:"CartButton_cartSplitter__2P43C"}},25:function(t,e,n){t.exports={navbar:"Navbar_navbar__1REaL",navbarLogo:"Navbar_navbarLogo__1PSjx"}},29:function(t,e,n){t.exports={container:"Container_container__t6wXG"}},30:function(t,e,n){t.exports={main:"MainLayout_main__3TxGr"}},31:function(t,e,n){t.exports={productCards:"ProductCards_productCards__2Y8mb"}},32:function(t,e,n){t.exports={card:"Card_card__1gwY0"}},33:function(t,e,n){t.exports={cardBody:"CardBody_cardBody__1tZfk"}},34:function(t,e,n){t.exports={cardFooter:"CardFooter_cardFooter__3BUdD"}},49:function(t,e,n){},50:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(15),o=n.n(a),s=n(6),i=n(3),u=n(26),d=n.n(u),l=n(7),j=n(14),b=n.n(j),p=n(22),h=n(16),O=n(12),f=function(t){return function(e){return"".concat(t,"/").concat(e)}},x=function(){return Object(O.b)()},m=O.c,_="https://murmuring-tor-81614.herokuapp.com",C="".concat(_,"/api"),v=n(52),g=f("PRODUCTS"),N=function(){var t=Object(p.a)(b.a.mark((function t(e){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.length){t.next=2;break}return t.abrupt("return",[]);case 2:return t.prev=2,t.next=5,fetch("".concat(C,"/dealers"));case 5:return n=t.sent,t.next=8,n.json();case 8:return r=t.sent,t.abrupt("return",r.filter((function(t){return e.find((function(e){return e===t}))})));case 12:return t.prev=12,t.t0=t.catch(2),t.abrupt("return",[]);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),y=Object(s.c)(g("fetchProducts"),function(){var t=Object(p.a)(b.a.mark((function t(e,n){var r,c,a,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(C,"/goods"),t.next=3,N(e);case 3:return(c=t.sent)&&c.length&&(r="".concat(r,"?dealers=").concat(c.join(","))),t.next=7,fetch(r);case 7:return a=t.sent,t.next=10,a.json();case 10:return o=t.sent,t.abrupt("return",o.map((function(t){return t.uuid=Object(v.a)(),t})));case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),w=Object(s.d)({isLoading:!1,data:[]},(function(t){t.addCase(y.pending,(function(t){t.isLoading=!0})).addCase(y.rejected,(function(t){t.isLoading=!1})).addCase(y.fulfilled,(function(t,e){t.data=e.payload}))})),k=Object(h.a)((function(t){return t.products}),(function(t){return t.data})),A=f("CART"),B=Object(s.b)(A("addToCart")),I=Object(s.b)(A("removeFromCart")),L=Object(s.b)(A("removeAllFromCart")),P=Object(s.d)({items:[]},(function(t){t.addCase(B,(function(t,e){var n=t.items.find((function(t){return t.product.uuid===e.payload.uuid}));n?n.count++:t.items.push({product:e.payload,count:1})})).addCase(I,(function(t,e){var n=t.items.find((function(t){return t.product.uuid===e.payload}));n&&(n.count>1?n.count--:t.items=t.items.filter((function(t){return t.product.uuid!==e.payload})))})).addCase(L,(function(t){t.items=[]}))})),F=Object(h.a)((function(t){return t.cart}),(function(t){return t.items})),R=Object(h.a)(F,(function(t){return t.reduce((function(t,e){return t+e.count}),0)})),S=Object(h.a)(F,(function(t){return t.reduce((function(t,e){return t+e.product.price*e.count}),0).toFixed(2)})),T=Object(i.b)({products:w,cart:P}),E={key:"ROOT",storage:d.a,whitelist:["cart"]},G=Object(l.g)(E,T),D=[l.a,l.f,l.b,l.c,l.d,l.e],J=Object(s.a)({reducer:G,middleware:function(t){return t({serializableCheck:{ignoredActions:[].concat(D)}})}}),W=Object(l.h)(J),$=n(28),z=n(13),M=n(2),U=n(24),V=n.n(U),Y=n(1),K=function(){var t=m(R);return Object(Y.jsxs)("button",{className:V.a.cartButton,children:["Cart",Object(Y.jsx)("span",{className:V.a.cartSplitter}),t]})},Q=n(25),X=n.n(Q),Z=n(9),q=n(29),H=n.n(q),tt=function(t){var e=t.children,n=t.className,r=t.ref;return Object(Y.jsx)("div",{ref:r,className:Object(Z.a)(H.a.container,n),children:e})},et=function(){return Object(Y.jsx)("header",{children:Object(Y.jsxs)(tt,{className:X.a.navbar,children:[Object(Y.jsx)(z.b,{to:"/",children:Object(Y.jsx)("h1",{className:X.a.navbarLogo,children:"CRA Internet Shop"})}),Object(Y.jsx)(z.b,{to:"/cart",children:Object(Y.jsx)(K,{})})]})})},nt=n(30),rt=n.n(nt),ct=function(t){var e=t.children;return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(et,{}),Object(Y.jsx)("main",{className:rt.a.main,children:e})]})},at=n(31),ot=n.n(at),st=n(11),it=n(18),ut=n(32),dt=n.n(ut),lt=function(t){var e=t.children,n=t.className,r=Object(it.a)(t,["children","className"]);return Object(Y.jsx)("div",Object(st.a)(Object(st.a)({},r),{},{className:Object(Z.a)(n,dt.a.card),children:e}))},jt=n(33),bt=n.n(jt),pt=function(t){var e=t.children;return Object(Y.jsx)("div",{className:bt.a.cardBody,children:e})},ht=n(34),Ot=n.n(ht),ft=function(t){var e=t.children;return Object(Y.jsx)("div",{className:Ot.a.cardFooter,children:e})},xt=n(19),mt=n.n(xt),_t=function(t){var e=t.children,n=t.className,r=t.wide,a=t.danger,o=Object(it.a)(t,["children","className","wide","danger"]),s=c.a.useMemo((function(){var t=[n,mt.a.button];return r&&t.push(mt.a.buttonWide),a&&t.push(mt.a.buttonDanger),t}),[r,a,n]);return Object(Y.jsx)("button",Object(st.a)(Object(st.a)({},o),{},{className:Object(Z.a)(s),children:e}))},Ct=n(20),vt=n.n(Ct),gt=function(t){var e,n=t.product,r=n.name,a=n.price,o=n.image,s=x(),i=c.a.useCallback((function(){s(B(n))}),[n]);return Object(Y.jsxs)(lt,{className:vt.a.productCard,children:[Object(Y.jsx)("img",{className:vt.a.productImage,src:(e=o,"".concat(_).concat(e)),alt:"Node Logo"}),Object(Y.jsx)(pt,{children:Object(Y.jsxs)("div",{className:vt.a.productInfo,children:[Object(Y.jsx)("h4",{children:r}),Object(Y.jsxs)("h4",{children:["$",a]})]})}),Object(Y.jsx)(ft,{children:Object(Y.jsx)(_t,{wide:!0,onClick:i,children:"Add to cart"})})]})},Nt=function(t){var e=t.dealers,n=x(),r=m(k);return c.a.useEffect((function(){n(y(e))}),[]),Object(Y.jsx)(tt,{className:ot.a.productCards,children:r.map((function(t){return Object(Y.jsx)(gt,{product:t},t.uuid)}))})},yt=function(t){var e=t.dealers;return Object(Y.jsx)(ct,{children:Object(Y.jsx)(Nt,{dealers:e})})},wt=n(8),kt=n.n(wt),At=function(t){var e=t.item,n=x(),r=c.a.useCallback((function(){n(I(e.product.uuid))}),[]),a=e.product,o=e.count;return Object(Y.jsxs)("tr",{className:kt.a.tableRow,children:[Object(Y.jsx)("td",{children:a.name}),Object(Y.jsxs)("td",{children:["$",a.price]}),Object(Y.jsx)("td",{children:o}),Object(Y.jsx)("td",{className:kt.a.rightAlignedCol,children:Object(Y.jsx)(_t,{danger:!0,onClick:r,children:"Remove"})})]})},Bt=function(){var t=x(),e=m(F),n=m(S);return Object(Y.jsx)(tt,{children:e.length?Object(Y.jsxs)("table",{className:kt.a.table,children:[Object(Y.jsxs)("colgroup",{children:[Object(Y.jsx)("col",{span:1,style:{width:"60%"}}),Object(Y.jsx)("col",{span:1,style:{width:"15%"}}),Object(Y.jsx)("col",{span:1,style:{width:"10%"}}),Object(Y.jsx)("col",{span:1,style:{width:"15%"}})]}),Object(Y.jsx)("thead",{children:Object(Y.jsxs)("tr",{children:[Object(Y.jsx)("th",{children:"Name"}),Object(Y.jsx)("th",{children:"Price"}),Object(Y.jsx)("th",{children:"Count"}),Object(Y.jsx)("th",{className:kt.a.rightAlignedCol,children:Object(Y.jsx)(_t,{danger:!0,onClick:function(){return t(L())},children:"Remove All"})})]})}),Object(Y.jsxs)("tbody",{children:[e.map((function(t){return Object(Y.jsx)(At,{item:t},t.product.uuid)})),Object(Y.jsxs)("tr",{children:[Object(Y.jsx)("td",{children:Object(Y.jsx)("b",{children:"Total:"})}),Object(Y.jsxs)("td",{children:["$",n]}),Object(Y.jsx)("td",{colSpan:1,className:kt.a.emptyCol})]})]})]}):Object(Y.jsx)("h4",{className:kt.a.cartEmpty,children:"Cart is empty..."})})},It=function(){return Object(Y.jsx)(ct,{children:Object(Y.jsx)(Bt,{})})},Lt=function(t){var e=t.dealers;return Object(Y.jsx)(O.a,{store:J,children:Object(Y.jsx)($.a,{persistor:W,children:Object(Y.jsx)(z.a,{basename:"/perx-internet-shop",children:Object(Y.jsxs)(M.c,{children:[Object(Y.jsx)(M.a,{path:"/",element:Object(Y.jsx)(yt,{dealers:e})}),Object(Y.jsx)(M.a,{path:"/cart",element:Object(Y.jsx)(It,{})})]})})})})},Pt=(n(49),!1);window.__APPLICATION__={start:function(t){if(Pt)console.log("Application already running...");else{var e=t?t.dealers:[];Pt=!0,console.log("Application starting with initial values...",t),o.a.render(Object(Y.jsx)(Lt,{dealers:e}),document.getElementById("root"))}}}},8:function(t,e,n){t.exports={table:"CartGrid_table__2d81L",rightAlignedCol:"CartGrid_rightAlignedCol__2da3K",emptyCol:"CartGrid_emptyCol__1Strf",cartEmpty:"CartGrid_cartEmpty__l18eN"}}},[[50,1,2]]]);
//# sourceMappingURL=main.a5964e18.chunk.js.map